plot(cars)
install.packages("rNOMADS")
require(rNOMADS)
require(tidyverse)
arch <- ArchiveGribGrab()
arch <- ArchiveGribGrab(abbrev = "gfsanl",
model.date = 20140101,
model.run <- 00)
arch <- ArchiveGribGrab(abbrev = "gfsanl",
model.date = 20140101,
model.run = 00,
preds = 0)
arch
model.data <- ReadGrib(arch[1]$file.name)
model.data <- ReadGrib(arch[[1]]$file.name)
model.data <- ReadGrib(file.names = "20140101_0000_000.grb2")
model.data <- ReadGrib(file.names = "20140101_0000_000.grb2", file.type = "grib2")
require(rNOMADS)
require(tidyverse)
install.packages("wgrib2")
require(rNOMADS)
require(tidyverse)
install.packages("wgrib2")
system("wgrib2")
require(rNOMADS)
require(tidyverse)
model.data <- ReadGrib(file.names = "20140101_0000_000.grb2", file.type = "grib2")
system("wgrib2")
system("wgrib2", intern = TRUE)
require(rNOMADS)
require(tidyverse)
model.list <- NOMADSRealTimeList("grib")
wave.idx <- which(model.list$name == "Wave")
wave.url <- model.list$url[wave.idx]
wave.latest.urls <- CrawlModels(url = wave.url, depth = 2)
wave.model.info <- ParseModelPage(wave.latest.urls[1])
wave.forecast <- GribGrab(model.url = wave.latest.urls[1],
preds = wave.model.info$pred[c(1,5,9,13,17,21,25,29)],
levels = wave.model.info$levels,
variables = wave.model.info$variables,
tidy = TRUE,
local.dir = "data/")
wave.latest.urls[1]
preds
wave.model.info$pred
wave.model.info
wave.model.info$pred[c(1,5,9,13,17,21,25,29)]
wave.forecast <- GribGrab(model.url = wave.latest.urls[1],
preds = wave.model.info$pred,
levels = wave.model.info$levels,
variables = wave.model.info$variables,
tidy = TRUE,
local.dir = "data/")
wave.forecast
wave.forecast[[1]]$file.name
model.data <- ReadGrib(file.names = wave.forecast[[1]]$file.name, levels = wave.model.info$levels,
variables = wave.model.info$variables[1])
wave.model.info$variables
system("wgrib2")
system("wgrib2")
require(rNOMADS)
require(tidyverse)
model.list <- NOMADSRealTimeList("grib")
wave.idx <- which(model.list$name == "Wave")
wave.url <- model.list$url[wave.idx]
wave.latest.urls <- CrawlModels(url = wave.url, depth = 2)
wave.model.info <- ParseModelPage(wave.latest.urls[1])
model.data <- ReadGrib(file.names = "data/akw.t00z.grib.grib2.grb", levels = wave.model.info$levels,
variables = wave.model.info$variables[1])
system("wgrib2")
system("wgrib2")
system("wgrib2")
system("wgrib2")
old_path <- Sys.getenv("PATH")
old_path
Sys.setenv(PATH = paste(old_path, "/usr/local/wgrib2", sep = ":"))
system("wgrib2")
require(rNOMADS)
require(tidyverse)
model.data <- ReadGrib(file.names = "data/akw.t00z.grib.grib2.grb", levels = wave.model.info$levels,
variables = wave.model.info$variables[1])
model.list <- NOMADSRealTimeList("grib")
wave.idx <- which(model.list$name == "Wave")
wave.url <- model.list$url[wave.idx]
wave.latest.urls <- CrawlModels(url = wave.url, depth = 2)
wave.model.info <- ParseModelPage(wave.latest.urls[1])
model.data <- ReadGrib(file.names = "data/akw.t00z.grib.grib2.grb", levels = wave.model.info$levels,
variables = wave.model.info$variables[1])
str(model.data)
model.data$variables
GribInfo("data/akw.t00z.grib.grib2.grb")
i <- GribInfo("data/akw.t00z.grib.grib2.grb")
i
str(i)
i$inventory
wave.model.info$variables
require(rNOMADS)
require(tidyverse)
model.list <- NOMADSRealTimeList("grib")
model.list
model.list$name
gfs.25.idx <- which(model.list$name == "GFS 0.25 Degree")
gfs.25.url <- model.list$url[gfs.25.idx]
gfs.25h.idx <- which(model.list$name == "GFS 0.25 Degree Hourly")
gfs.25h.url <- model.list$url[gfs.25h.idx]
gfs.25.latest.urls <- CrawlModels(url = gfs.25.url, depth = 2)
gfs.25h.latest.urls <- CrawlModels(url = gfs.25h.url, depth = 2)
gfs.25.url
gfs.25h.url
wave.latest.urls
wave.idx <- which(model.list$name == "Wave")
wave.url <- model.list$url[wave.idx]
wave.latest.urls <- CrawlModels(url = wave.url, depth = 2)
wave.model.info <- ParseModelPage(wave.latest.urls[1])
gfs.25.url
CrawlModels(model.list$url[1])
CrawlModels(model.list$url[2])
gfs.25.idx
CrawlModels(model.list$url[3])
CrawlModels(model.list$url[3],depth = 2)
CrawlModels("http://nomads.ncep.noaa.gov/cgi-bin/filter_gfs_0p25.pl?dir=%2Fgfs.2018120618",depth = 2)
model.list$url
model.list <- NOMADSArchiveList("grib")
model.list
wave.url <- model.list$url[wave.idx]
source('~/Projects/global_metocean_data/ww3_forecast.R')
wave.latest.url <- CrawlModels(url = wave.url, depth = 2)
source('~/Projects/global_metocean_data/ww3_forecast.R', echo=TRUE)
wave.latest.url
model.list
str(model.list)
wave.url
wave.model.info <- ParseModelPage(wave.latest.url[1])
wave.model.info
wave.latest.url
class(wave.model.info$pred)
class(wave.model.info)
grepl("nww3", wave.model.info)
grepl("nww3", wave.model.info$pred)
wave.model.info$pred[grepl("nww3", wave.model.info$pred)]
wave.model.info$variables
source('~/Projects/global_metocean_data/ww3_forecast.R')
al <- NOMADSArchiveList()
model.list$abbrev
model.list$name
al <- NOMADSArchiveList("wave")
model.info <- ArchiveGribGrab("wave", "20180601", model.run = 00, preds=0, local.dir = "data/", tidy=TRUE)
wave.url
al <- NOMADSArchiveList("wave.url"grib"")
al <- NOMADSArchiveList("grib")
al
wave.latest.url <- CrawlModels(url = wave.url, depth=10)
wave.model.info
grepl("nww3", wave.model.info$pred)
grepl(!"nww3", wave.model.info$pred)
!grepl("nww3", wave.model.info$pred)
grepl("nww3", wave.model.info$pred) & !grepl("multi", wave.model.info$pred)
nww3_f <- wave.model.info$pred[grepl("nww3", wave.model.info$pred) & !grepl("multi", wave.model.info$pred)]
nww3_f <- wave.model.info$pred[grepl("nww3", wave.model.info$pred) & !grepl("multi", wave.model.info$pred)]
nww3_f
source('~/Projects/global_metocean_data/ww3_forecast.R')
?GribGrab
source('~/Projects/global_metocean_data/ww3_forecast.R')
source('~/Projects/global_metocean_data/ww3_forecast.R')
